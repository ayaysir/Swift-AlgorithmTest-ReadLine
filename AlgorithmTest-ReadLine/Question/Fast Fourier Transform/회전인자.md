# 회전 인자

---

## ✅ 회전 인자란?

### 📌 정의부터

FFT에서 말하는 **회전 인자**는 수학적으로 이렇게 표현됩니다:

$$
w_n^k = e^{-2\pi i k / n}
$$

이것은 **단위원 상의 복소수**로, `n`개의 점으로 원을 나누었을 때,
그 중 `k`번째 점의 위치를 의미하는 복소수입니다.

---

## 🌀 왜 "회전" 인자일까?

복소수 평면에서 이 값은 아래와 같은 형태예요:

$$
\cos\left(\frac{2\pi k}{n}\right) + i \cdot \sin\left(\frac{2\pi k}{n}\right)
$$

이건 원 위에서 **각도**에 따라 위치가 바뀌는 점입니다.
즉, 이 복소수를 곱하면 **벡터가 회전하는 효과**가 나기 때문에 \*\*회전 인자(rotation factor)\*\*라고 부릅니다.

---

## 🧠 FFT에서 회전 인자의 역할

FFT는 배열을 반으로 쪼개서 결과를 합치는 과정에서,
**짝수 위치 값들과 홀수 위치 값들**을 복소수 곱(`w`)을 통해 섞습니다.

```swift
let wn = Complex(cos(ang), sin(ang))
var w = Complex(1, 0)
for i in 0..<n/2 {
  let u = a0[i]
  let v = a1[i] * w
  a[i] = u + v
  a[i + n/2] = u - v
  w *= wn
}
```

이때 쓰이는 `w`가 바로 회전 인자입니다.

* `w = 1`으로 시작해서,
* `w *= wn`으로 매번 원을 따라 **회전**하며 다음 주파수에 접근합니다.

---

## 🎨 시각적으로 보면?

* 회전 인자는 **복소수 원(Circle of Complex Numbers)** 상의 점
* 각 주파수마다 위치가 다르고, **정해진 각도만큼 회전**하는 역할

---

## ✅ 정리

| 용어      | 의미                                                         |
| ------- | ---------------------------------------------------------- |
| 회전 인자   | FFT에서 각 주파수 성분을 처리할 때 사용하는 복소수                             |
| 수식 형태   | $e^{-2\pi i k / n}$, 또는 $\cos(2\pi k/n) + i\sin(2\pi k/n)$ |
| 역할      | 원 위에서 주파수 성분을 회전시켜서 적절히 더하거나 빼는 데 사용                       |
| 코드 내 위치 | `let wn = Complex(cos(ang), sin(ang))`, `w *= wn` 등        |

---

FFT의 핵심은 **재귀 + 회전 인자로 주파수 섞기**입니다.
이 회전 인자가 있어야 FFT가 빠르고 정확하게 작동합니다.
